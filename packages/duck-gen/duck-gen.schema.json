{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://example.com/schemas/duck-gen.schema.json",
  "title": "Duck Gen Config",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "$schema": {
      "type": "string",
      "description": "Optional schema reference for editor validation."
    },
    "framework": {
      "type": "string",
      "enum": ["nestjs"],
      "description": "Server framework used by the generator."
    },
    "extensions": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "shared": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "includeNodeModules": {
              "type": "boolean",
              "default": false,
              "description": "Shared default: scan files inside node_modules."
            },
            "outputSource": {
              "oneOf": [
                {
                  "type": "string"
                },
                {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              ],
              "description": "Default output directories for generated files (used when a feature does not define outputSource)."
            },
            "sourceGlobs": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Shared default: glob patterns for files to scan."
            },
            "tsconfigPath": {
              "type": "string",
              "description": "Shared default: path to the tsconfig.json used by ts-morph."
            }
          }
        },
        "apiRoutes": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true,
              "description": "Enable API routes generation."
            },
            "globalPrefix": {
              "type": "string",
              "default": "/api",
              "description": "Global prefix applied to all API routes."
            },
            "includeNodeModules": {
              "type": "boolean",
              "default": false,
              "description": "Scan files inside node_modules (overrides extensions.shared)."
            },
            "normalizeAnyToUnknown": {
              "type": "boolean",
              "default": true,
              "description": "Normalize any to unknown in generated route types."
            },
            "outputSource": {
              "oneOf": [
                {
                  "type": "string"
                },
                {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              ],
              "description": "Output file path(s) for generated API routes (file paths or directories)."
            },
            "outputPath": {
              "type": "string",
              "deprecated": true,
              "description": "Output file path for generated API routes."
            },
            "sourceGlobs": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Glob patterns for files to scan (overrides extensions.shared)."
            },
            "tsconfigPath": {
              "type": "string",
              "description": "Path to the tsconfig.json used by ts-morph (overrides extensions.shared)."
            }
          }
        },
        "messages": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true,
              "description": "Enable @duckgen messages generation."
            },
            "outputSource": {
              "oneOf": [
                {
                  "type": "string"
                },
                {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              ],
              "description": "Output file path(s) for generated message types (file paths or directories)."
            },
            "outputPath": {
              "type": "string",
              "deprecated": true,
              "description": "Output file path for generated message types."
            },
            "includeNodeModules": {
              "type": "boolean",
              "default": false,
              "description": "Scan files inside node_modules (overrides extensions.shared)."
            },
            "sourceGlobs": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Glob patterns for files to scan (overrides extensions.shared)."
            },
            "tsconfigPath": {
              "type": "string",
              "description": "Path to the tsconfig.json used by ts-morph (overrides extensions.shared)."
            }
          }
        }
      }
    }
  },
  "examples": [
    {
      "$schema": "node_modules/@gentleduck/gen/duck-gen.schema.json",
      "framework": "nestjs",
      "extensions": {
        "shared": {
          "includeNodeModules": false,
          "outputSource": "./generated",
          "sourceGlobs": ["src/**/*.ts", "src/**/*.tsx"],
          "tsconfigPath": "./tsconfig.json"
        },
        "apiRoutes": {
          "enabled": true,
          "globalPrefix": "/api",
          "normalizeAnyToUnknown": true,
          "outputSource": ["./generated", "./src/generated"]
        },
        "messages": {
          "enabled": true,
          "outputSource": "./generated"
        }
      }
    }
  ]
}
